<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch Memory: Verben & Fälle</title>

    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --success-color: #27ae60;
            --error-color: #c0392b;
            --bg-color: #f4f7f6;
            --card-back: #2c3e50; /* Farbe der Kartenrückseite */
            --card-front: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--secondary-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: var(--secondary-color);
            margin-bottom: 10px;
        }

        p.instruction {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.1em;
            color: #555;
        }

        /* --- GAME GRID --- */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* Desktop: 4 Spalten */
            gap: 15px;
            perspective: 1000px; /* Für 3D Effekt */
            margin-bottom: 30px;
        }

        /* --- CARD STYLES --- */
        .memory-card {
            background-color: transparent;
            aspect-ratio: 1 / 1; /* Quadratisch */
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* Status-Klassen für die Karte */
        .memory-card.flip {
            transform: rotateY(180deg);
        }

        .memory-card.matched {
            /* Optional: Karten verschwinden lassen oder markieren */
            /* opacity: 0.5; */
            cursor: default;
        }

        /* Vorder- und Rückseite */
        .front-face, .back-face {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            backface-visibility: hidden; /* Wichtig: Versteckt die Rückseite beim Drehen */
            font-size: 0.9em;
        }

        .front-face {
            background-color: var(--card-front);
            color: var(--text-color);
            transform: rotateY(180deg); /* Startet gedreht */
            border: 2px solid #ddd;
        }

        /* Inhalt der Vorderseite */
        .card-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            word-break: break-word;
        }

        .ru-text { font-size: 1.1em; color: var(--primary-color); }
        .de-text { font-size: 1em; color: #555; }
        .grammar-hint { font-size: 0.8em; color: #999; font-style: italic; }

        .back-face {
            background-color: var(--card-back);
            color: white;
            font-size: 2em;
            /* Muster für Rückseite */
            background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.05) 0px, rgba(255,255,255,0.05) 10px, transparent 10px, transparent 20px);
        }

        .back-face::after {
            content: "?"; /* Fragezeichen auf Rückseite */
        }

        /* Feedback-Farben bei Match/Mismatch (auf der Vorderseite) */
        .memory-card.matched .front-face {
            border-color: var(--success-color);
            background-color: #d4edda;
        }

        /* --- CONTROLS --- */
        .status-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--secondary-color);
            padding: 0 10px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1em;
            color: white;
            min-width: 150px;
            transition: opacity 0.2s;
        }

        .btn-reset { background-color: var(--primary-color); }
        .btn-solve { background-color: #f39c12; }
        button:hover { opacity: 0.9; }

        /* --- RESPONSIVE --- */
        @media (max-width: 650px) {
            .memory-grid {
                grid-template-columns: repeat(3, 1fr); /* 3 Spalten Tablet/großes Handy */
                gap: 10px;
            }
            .front-face { font-size: 0.85em; }
        }

        @media (max-width: 450px) {
            .memory-grid {
                grid-template-columns: repeat(3, 1fr); /* Bei sehr kleinen Screens evtl 2, aber 3 ist oft besser für Übersicht */
                gap: 8px;
            }
            .front-face { font-size: 0.75em; padding: 5px; }
            .ru-text { font-size: 1em; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Russisch Memory</h1>
    <p class="instruction">
        Finden Sie die Paare: <br> Deutsche Bedeutung <-> Russisches Verb (+ Fall)
    </p>

    <div class="status-bar">
        <span id="moves">Züge: 0</span>
        <span id="pairs-found">Paare: 0 / 8</span>
    </div>

    <div class="memory-grid" id="memory-grid">
        <!-- Karten werden per JS generiert -->
    </div>

    <div class="controls">
        <button class="btn-reset" onclick="resetGame()">Spiel neu starten</button>
        <button class="btn-solve" onclick="showSolution()">Lösung anzeigen</button>
    </div>
</div>

<script>
    // DATEN: Die Paare (ID verknüpft Paar 1 und Paar 2)
    // type: 'de' (Deutsch) oder 'ru' (Russisch)
    const pairsData = [
        { id: 1, type: 'ru', text: "учиться", hint: "+ Präpositiv" },
        { id: 1, type: 'de', text: "Schüler/Student sein (Prozess)", hint: "Wo? Wie?" },

        { id: 2, type: 'ru', text: "учить", hint: "+ Akkusativ" },
        { id: 2, type: 'de', text: "etwas auswendig lernen", hint: "Vokabeln, Regeln" },

        { id: 3, type: 'ru', text: "изучать", hint: "+ Akkusativ" },
        { id: 3, type: 'de', text: "tiefgehend studieren", hint: "Wissenschaft, Fach" },

        { id: 4, type: 'ru', text: "заниматься", hint: "+ Instrumental" },
        { id: 4, type: 'de', text: "sich beschäftigen / üben", hint: "Sport, Hausaufgaben" },

        { id: 5, type: 'ru', text: "учить", hint: "+ Akk (Person) + Dat" },
        { id: 5, type: 'de', text: "jemanden lehren", hint: "unterrichten" },

        { id: 6, type: 'ru', text: "научиться", hint: "+ Infinitiv" },
        { id: 6, type: 'de', text: "eine Fähigkeit erwerben", hint: "Resultat" },

        { id: 7, type: 'ru', text: "разучиться", hint: "+ Infinitiv" },
        { id: 7, type: 'de', text: "eine Fähigkeit verlernen", hint: "vergessen wie" },

        { id: 8, type: 'ru', text: "выучить", hint: "+ Akkusativ" },
        { id: 8, type: 'de', text: "fertig gelernt haben", hint: "Resultat" }
    ];

    let cards = []; // Array für das aktuelle Spiel
    let hasFlippedCard = false;
    let lockBoard = false;
    let firstCard, secondCard;
    let moves = 0;
    let matches = 0;
    const totalPairs = pairsData.length / 2;

    // DOM Elements
    const grid = document.getElementById('memory-grid');
    const movesDisplay = document.getElementById('moves');
    const pairsDisplay = document.getElementById('pairs-found');

    // INIT
    window.onload = function() {
        resetGame();
    };

    function resetGame() {
        grid.innerHTML = '';
        cards = [];
        moves = 0;
        matches = 0;
        hasFlippedCard = false;
        lockBoard = false;
        firstCard = null;
        secondCard = null;
        updateStats();

        // 1. Daten duplizieren und mischen
        // Wir nehmen pairsData direkt, da es schon die Einzelteile sind.
        let gameDeck = [...pairsData];
        shuffle(gameDeck);

        // 2. Karten erstellen
        gameDeck.forEach(item => {
            const card = document.createElement('div');
            card.classList.add('memory-card');
            card.dataset.pairId = item.id; // ID zum Vergleichen

            // Vorderseite (Inhalt)
            const frontFace = document.createElement('div');
            frontFace.classList.add('front-face');
            
            // Inhalt stylen je nach Sprache
            if (item.type === 'ru') {
                frontFace.innerHTML = `
                    <div class="card-content">
                        <span class="ru-text">${item.text}</span>
                        <span class="grammar-hint">${item.hint}</span>
                    </div>`;
            } else {
                frontFace.innerHTML = `
                    <div class="card-content">
                        <span class="de-text">${item.text}</span>
                        <span class="grammar-hint">${item.hint}</span>
                    </div>`;
            }

            // Rückseite (Cover)
            const backFace = document.createElement('div');
            backFace.classList.add('back-face');

            card.appendChild(frontFace);
            card.appendChild(backFace);

            // Click Event
            card.addEventListener('click', flipCard);

            grid.appendChild(card);
        });
    }

    // Fisher-Yates Shuffle
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function flipCard() {
        if (lockBoard) return;
        if (this === firstCard) return; // Doppelklick verhindern

        this.classList.add('flip');

        if (!hasFlippedCard) {
            // Erster Klick
            hasFlippedCard = true;
            firstCard = this;
            return;
        }

        // Zweiter Klick
        secondCard = this;
        incrementMoves();
        checkForMatch();
    }

    function checkForMatch() {
        let isMatch = firstCard.dataset.pairId === secondCard.dataset.pairId;

        if (isMatch) {
            disableCards();
            matches++;
            updateStats();
            if (matches === totalPairs) {
                setTimeout(() => alert("Glückwunsch! Alle Paare gefunden."), 500);
            }
        } else {
            unflipCards();
        }
    }

    function disableCards() {
        // Event Listener entfernen und als matched markieren
        firstCard.removeEventListener('click', flipCard);
        secondCard.removeEventListener('click', flipCard);

        firstCard.classList.add('matched');
        secondCard.classList.add('matched');

        resetBoard();
    }

    function unflipCards() {
        lockBoard = true;

        setTimeout(() => {
            firstCard.classList.remove('flip');
            secondCard.classList.remove('flip');
            resetBoard();
        }, 1200); // Zeit zum Merken geben
    }

    function resetBoard() {
        [hasFlippedCard, lockBoard] = [false, false];
        [firstCard, secondCard] = [null, null];
    }

    function incrementMoves() {
        moves++;
        updateStats();
    }

    function updateStats() {
        movesDisplay.textContent = `Züge: ${moves}`;
        pairsDisplay.textContent = `Paare: ${matches} / ${totalPairs}`;
    }

    function showSolution() {
        // Alle Karten umdrehen
        const allCards = document.querySelectorAll('.memory-card');
        allCards.forEach(card => {
            card.classList.add('flip');
            // Optional: Als "matched" markieren, damit man nicht weiterspielen muss
            card.classList.add('matched');
        });
        lockBoard = true; // Spiel sperren
    }

</script>

</body>
</html>