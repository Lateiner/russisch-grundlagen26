<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch Spiel: Der Spion</title>

    <style>
        :root {
            --primary-color: #2c3e50; /* Agenten-Blau */
            --accent-color: #e74c3c; /* Alarm-Rot f√ºr den Spion */
            --success-color: #27ae60;
            --bg-color: #ecf0f1;
            --card-bg: #ffffff;
            --text-color: #34495e;
            --highlight: #f1c40f;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: transparent;
        }

        /* --- HEADER --- */
        .game-header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 5px;
            font-size: 2em;
        }
        
        .icon-spy {
            font-size: 3em;
            display: block;
            margin-bottom: 10px;
        }

        p.instruction {
            font-size: 1.1em;
            color: #7f8c8d;
            max-width: 600px;
            margin: 0 auto;
        }

        /* --- PROGRESS BAR --- */
        .progress-container {
            background-color: #bdc3c7;
            border-radius: 10px;
            height: 10px;
            width: 100%;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar {
            background-color: var(--primary-color);
            height: 100%;
            width: 0%; /* Wird per JS gesteuert */
            transition: width 0.3s ease;
        }

        .round-indicator {
            text-align: right;
            font-size: 0.9em;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        /* --- GAME AREA --- */
        .game-area {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        /* Das Raster f√ºr die 4 S√§tze */
        .sentence-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Desktop: 2x2 */
            gap: 15px;
            margin-bottom: 20px;
        }

        .sentence-card {
            background-color: #f8f9fa;
            border: 2px solid #dfe6e9;
            border-radius: 10px;
            padding: 20px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 80px;
            font-weight: 500;
            position: relative;
        }

        .sentence-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-color: var(--primary-color);
        }

        /* States */
        .sentence-card.found-spy {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
            animation: shake 0.5s;
        }
        
        .sentence-card.found-spy::after {
            content: "üïµÔ∏è SPION!";
            position: absolute;
            top: -10px;
            right: -10px;
            background: #fff;
            color: #000;
            font-size: 0.8em;
            padding: 2px 6px;
            border-radius: 10px;
            border: 1px solid #ccc;
            font-weight: bold;
        }

        .sentence-card.innocent {
            background-color: var(--success-color); /* Gr√ºn f√ºr "Ich bin unschuldig/korrekt" */
            color: white;
            border-color: var(--success-color);
            opacity: 0.5; /* Ausgegraut, weil nicht gesucht */
        }
        
        .sentence-card.mistake {
            /* Wenn man einen Unschuldigen verd√§chtigt */
            background-color: #95a5a6;
            color: white;
        }

        /* Feedback / Explanation Box */
        .interrogation-room {
            background-color: #fdf2f2;
            border-left: 5px solid var(--accent-color);
            padding: 15px;
            border-radius: 5px;
            display: none; /* Hidden initially */
            animation: slideIn 0.3s;
        }
        
        .interrogation-room h3 {
            margin-top: 0;
            color: var(--accent-color);
            font-size: 1.1em;
        }

        /* --- CONTROLS --- */
        .controls {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1em;
            color: white;
            min-width: 140px;
            transition: opacity 0.2s;
            box-shadow: 0 3px 5px rgba(0,0,0,0.2);
        }

        .btn-next { background-color: var(--primary-color); display: none; } /* Hidden until solved */
        .btn-reset { background-color: #7f8c8d; }
        .btn-solve { background-color: #f39c12; }
        
        button:hover { opacity: 0.9; transform: translateY(-1px); }

        /* ANIMATIONS */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* RESPONSIVE */
        @media (max-width: 600px) {
            .sentence-grid {
                grid-template-columns: 1fr; /* Untereinander */
            }
            .sentence-card {
                padding: 15px;
                min-height: 60px;
            }
            .controls {
                flex-direction: column;
            }
            button { width: 100%; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="game-header">
        <span class="icon-spy">üïµÔ∏è‚Äç‚ôÇÔ∏è</span>
        <h1>Der Spion</h1>
        <p class="instruction">
            In jeder Runde gibt es 4 S√§tze. Drei sind korrekt, aber einer ist falsch.
            <br>Finden Sie den "Spion" (den falschen Satz)!
        </p>
    </div>

    <div class="round-indicator" id="round-display">Runde 1 / 5</div>
    <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div class="game-area" id="game-area">
        <div class="sentence-grid" id="grid">
            <!-- Karten werden per JS generiert -->
        </div>

        <div class="interrogation-room" id="feedback-box">
            <!-- Erkl√§rung erscheint hier -->
        </div>
    </div>

    <div class="controls">
        <button class="btn-next" id="btn-next" onclick="nextRound()">N√§chste Runde ‚ûî</button>
        <button class="btn-reset" onclick="resetGame()">Neustart</button>
        <button class="btn-solve" onclick="showSolution()">L√∂sung zeigen</button>
    </div>
</div>

<script>
    // DATEN: Runden mit jeweils 4 S√§tzen.
    // 'sentences': Array mit 4 Strings.
    // 'spyIndex': Index des falschen Satzes (0-3).
    // 'explanation': Erkl√§rung, warum es falsch ist.
    const rounds = [
        {
            sentences: [
                "–Ø —É—á—É –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞.",           // Richtig (Akkusativ)
                "–û–Ω —É—á–∏—Ç—Å—è –≤ —à–∫–æ–ª–µ.",           // Richtig (Ort)
                "–ú—ã —É—á–∏–º —Å—Ç–∏—Ö–∏.",               // Richtig (Akkusativ)
                "–Ø —É—á—É –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ."         // FALSCH (SPION)
            ],
            spyIndex: 3,
            explanation: "Der Spion ist enttarnt! <br><strong>Fehler:</strong> '–Ø —É—á—É –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ'. <br><strong>Korrektur:</strong> '–Ø <em>—É—á—É—Å—å</em> –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ'. <br>Wenn man angibt, <em>wo</em> man lernt (Student sein), benutzt man <strong>—É—á–∏—Ç—å—Å—è</strong>."
        },
        {
            sentences: [
                "–û–Ω–∞ –∏–∑—É—á–∞–µ—Ç —Ñ–∏–∑–∏–∫—É.",          // Richtig (Wissenschaft)
                "–°—Ç—É–¥–µ–Ω—Ç—ã –∏–∑—É—á–∞—é—Ç –∏—Å—Ç–æ—Ä–∏—é.",    // Richtig (Wissenschaft)
                "–ê–Ω—Ç–æ–Ω –∏–∑—É—á–∞–µ—Ç —á–∏—Ç–∞—Ç—å.",        // FALSCH (SPION)
                "–Ø —É—á—É –ø—Ä–∞–≤–∏–ª–∞."                // Richtig (Memorieren)
            ],
            spyIndex: 2,
            explanation: "Der Spion ist enttarnt! <br><strong>Fehler:</strong> '–ê–Ω—Ç–æ–Ω –∏–∑—É—á–∞–µ—Ç —á–∏—Ç–∞—Ç—å'. <br><strong>Korrektur:</strong> '–ê–Ω—Ç–æ–Ω <em>—É—á–∏—Ç—Å—è</em> —á–∏—Ç–∞—Ç—å'. <br><strong>–ò–∑—É—á–∞—Ç—å</strong> braucht ein Substantiv (eine Wissenschaft). Um eine T√§tigkeit (Verb) zu lernen, nutzt man <strong>—É—á–∏—Ç—å—Å—è</strong> + Infinitiv."
        },
        {
            sentences: [
                "–ú—ã –∑–∞–Ω–∏–º–∞–µ–º—Å—è —Å–ø–æ—Ä—Ç–æ–º.",       // Richtig (Instrumental)
                "–Ø –∑–∞–Ω–∏–º–∞—é—Å—å –º–∞—Ç–µ–º–∞—Ç–∏–∫—É.",      // FALSCH (SPION)
                "–¢—ã —Ö–æ—Ä–æ—à–æ —É—á–∏—à—å—Å—è.",           // Richtig (Qualit√§t)
                "–û–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç—Å—è –≤ –ø–∞—Ä–∫–µ."       // Richtig (Ort der T√§tigkeit)
            ],
            spyIndex: 1,
            explanation: "Der Spion ist enttarnt! <br><strong>Fehler:</strong> '–Ø –∑–∞–Ω–∏–º–∞—é—Å—å –º–∞—Ç–µ–º–∞—Ç–∏–∫—É'. <br><strong>Korrektur:</strong> '–Ø –∑–∞–Ω–∏–º–∞—é—Å—å <em>–º–∞—Ç–µ–º–∞—Ç–∏–∫–æ–π</em>'. <br>Das Verb <strong>–∑–∞–Ω–∏–º–∞—Ç—å—Å—è</strong> verlangt den Instrumental (Womit?), nicht den Akkusativ."
        },
        {
            sentences: [
                "–Ø –Ω–∞—É—á–∏–ª—Å—è –ø–ª–∞–≤–∞—Ç—å.",          // Richtig (F√§higkeit erworben)
                "–û–Ω —Ä–∞–∑—É—á–∏–ª—Å—è –ø–µ—Ç—å.",           // Richtig (F√§higkeit verlernt)
                "–Ø –Ω–∞—É—á–∏–ª—Å—è —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ.",    // FALSCH (SPION)
                "–ú—ã —É—á–∏–º—Å—è –ø–∏—Å–∞—Ç—å."             // Richtig (Prozess)
            ],
            spyIndex: 2,
            explanation: "Der Spion ist enttarnt! <br><strong>Fehler:</strong> '–Ø –Ω–∞—É—á–∏–ª—Å—è —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ'. <br><strong>Korrektur:</strong> '–Ø <em>–≤—ã—É—á–∏–ª</em> —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ'. <br><strong>–ù–∞—É—á–∏—Ç—å—Å—è</strong> bedeutet, eine *F√§higkeit* zu erwerben (+ Infinitiv). Einen Text lernt man auswendig mit <strong>–≤—ã—É—á–∏—Ç—å</strong>."
        },
        {
            sentences: [
                "–£—á–∏—Ç–µ–ª—å —É—á–∏—Ç –¥–µ—Ç–µ–π.",          // Richtig (Jemanden lehren)
                "–°—Ç—É–¥–µ–Ω—Ç –∏–∑—É—á–∞–µ—Ç –≤ –ú–æ—Å–∫–≤–µ.",    // FALSCH (SPION)
                "–ú—ã —É—á–∏–º —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫.",        // Richtig (Lernen Stoff)
                "–û–Ω–∞ —É—á–∏—Ç—Å—è –±—ã—Å—Ç—Ä–æ."            // Richtig (Wie?)
            ],
            spyIndex: 1,
            explanation: "Der Spion ist enttarnt! <br><strong>Fehler:</strong> '–°—Ç—É–¥–µ–Ω—Ç –∏–∑—É—á–∞–µ—Ç –≤ –ú–æ—Å–∫–≤–µ'. <br><strong>Korrektur:</strong> '–°—Ç—É–¥–µ–Ω—Ç <em>—É—á–∏—Ç—Å—è</em> –≤ –ú–æ—Å–∫–≤–µ'. <br><strong>–ò–∑—É—á–∞—Ç—å</strong> braucht zwingend ein Objekt (Was studiert er?). Wenn nur der Ort genannt wird, nutzen wir <strong>—É—á–∏—Ç—å—Å—è</strong>."
        }
    ];

    let currentRoundIndex = 0;
    let isRoundSolved = false;

    // INIT
    window.onload = function() {
        initGame();
    };

    function initGame() {
        currentRoundIndex = 0;
        loadRound();
    }

    function loadRound() {
        isRoundSolved = false;
        const roundData = rounds[currentRoundIndex];
        
        // UI Updates
        document.getElementById('round-display').textContent = `Runde ${currentRoundIndex + 1} / ${rounds.length}`;
        const progressPct = (currentRoundIndex / rounds.length) * 100;
        document.getElementById('progress-bar').style.width = `${progressPct}%`;
        
        document.getElementById('feedback-box').style.display = 'none';
        document.getElementById('btn-next').style.display = 'none';

        const grid = document.getElementById('grid');
        grid.innerHTML = '';

        // S√§tze rendern
        roundData.sentences.forEach((text, index) => {
            const card = document.createElement('div');
            card.className = 'sentence-card';
            card.textContent = text;
            card.onclick = () => checkCard(index, card);
            grid.appendChild(card);
        });
    }

    function checkCard(selectedIndex, cardElement) {
        if (isRoundSolved) return; // Nichts tun, wenn schon gel√∂st

        const roundData = rounds[currentRoundIndex];

        if (selectedIndex === roundData.spyIndex) {
            // SPION GEFUNDEN!
            isRoundSolved = true;
            cardElement.classList.add('found-spy');
            
            // Die anderen (unschuldigen) Karten markieren
            const allCards = document.querySelectorAll('.sentence-card');
            allCards.forEach((c, idx) => {
                if (idx !== selectedIndex) {
                    c.classList.add('innocent');
                }
            });

            // Feedback zeigen
            const fbBox = document.getElementById('feedback-box');
            fbBox.innerHTML = `<h3>üö® Spion gefasst!</h3> ${roundData.explanation}`;
            fbBox.style.display = 'block';

            // Next Button zeigen (oder Ende)
            const nextBtn = document.getElementById('btn-next');
            if (currentRoundIndex < rounds.length - 1) {
                nextBtn.style.display = 'block';
                nextBtn.textContent = "N√§chste Runde ‚ûî";
            } else {
                nextBtn.style.display = 'block';
                nextBtn.textContent = "Spiel beenden (Neustart)";
                nextBtn.onclick = resetGame; // √Ñndert Funktion auf Reset
                document.getElementById('progress-bar').style.width = `100%`;
            }

        } else {
            // FALSCHE WAHL (Einen Unschuldigen verd√§chtigt)
            cardElement.classList.add('mistake');
            // Kleines Wackeln oder so w√§re nett, aber Farbe reicht erstmal
            setTimeout(() => {
                // Optional: Farbe wieder wegnehmen, damit man nochmal raten kann?
                // Oder lassen wir es rot? Lassen wir es als "falsch" markiert.
            }, 500);
        }
    }

    function nextRound() {
        currentRoundIndex++;
        if (currentRoundIndex < rounds.length) {
            loadRound();
        }
    }

    function resetGame() {
        currentRoundIndex = 0;
        // Button Funktion zur√ºcksetzen falls am Ende ge√§ndert
        const nextBtn = document.getElementById('btn-next');
        nextBtn.onclick = nextRound;
        loadRound();
    }

    function showSolution() {
        if (isRoundSolved) return;
        
        const roundData = rounds[currentRoundIndex];
        const allCards = document.querySelectorAll('.sentence-card');
        
        // Simuliere Klick auf den Spion
        checkCard(roundData.spyIndex, allCards[roundData.spyIndex]);
    }

</script>

</body>
</html>